#!/usr/bin/env node

/**
 * Super Prompt CLI - Node.js wrapper
 * Delegates to Python core implementation
 */

const { execa } = require('execa');
const path = require('path');

async function main() {
  try {
    // Find the Python core CLI
    const scriptDir = path.dirname(__dirname);
    const projectRoot = path.resolve(scriptDir, '..', '..');
    const coreCliPath = path.join(projectRoot, 'packages', 'core-py', 'super_prompt', 'cli.py');

    // Check if Python core exists
    const fs = require('fs');
    if (!fs.existsSync(coreCliPath)) {
      console.error('❌ Super Prompt core not found. Please ensure the Python package is installed.');
      process.exit(1);
    }

    // Execute Python CLI with all arguments
    const { stdout, stderr, exitCode } = await execa('python3', [coreCliPath, ...process.argv.slice(2)], {
      cwd: process.cwd(),
      stdio: 'inherit'
    });

    process.exit(exitCode);

  } catch (error) {
    console.error('❌ Failed to execute Super Prompt:', error.message);
    process.exit(1);
  }
}

if (require.main === module) {
  main();
}
