Model Context Protocol (MCP)
The Codex CLI can be configured to leverage MCP servers by defining an mcp_servers section in ~/.codex/config.toml. It is intended to mirror how tools such as Claude and Cursor define mcpServers in their respective JSON config files, though the Codex format is slightly different since it uses TOML rather than JSON, e.g.:

# IMPORTANT: the top-level key is `mcp_servers` rather than `mcpServers`.
[mcp_servers.super-prompt]
command = "npx"
args = ["-y", "@cdw0424/super-prompt@latest", "sp-mcp"]
env = { SUPER_PROMPT_ALLOW_INIT = "true", SUPER_PROMPT_PROJECT_ROOT = "${workspaceFolder}" }
Using Codex as an MCP Server
The Codex CLI can also be run as an MCP server via codex mcp. For example, you can use codex mcp to make Codex available as a tool inside of a multi-agent framework like the OpenAI Agents SDK.

Codex MCP Server Quickstart
You can launch a Codex MCP server with the Model Context Protocol Inspector:

npx @modelcontextprotocol/inspector codex mcp
Send a tools/list request and you will see that there are two tools available:

codex - Run a Codex session. Accepts configuration parameters matching the Codex Config struct. The codex tool takes the following properties:

Property	Type	Description
prompt (required)	string	The initial user prompt to start the Codex conversation.
approval-policy	string	Approval policy for shell commands generated by the model: untrusted, on-failure, never.
base-instructions	string	The set of instructions to use instead of the default ones.
config	object	Individual config settings that will override what is in $CODEX_HOME/config.toml.
cwd	string	Working directory for the session. If relative, resolved against the server process's current directory.
include-plan-tool	boolean	Whether to include the plan tool in the conversation.
model	string	Optional override for the model name (e.g. o3, o4-mini).
profile	string	Configuration profile from config.toml to specify default options.
sandbox	string	Sandbox mode: read-only, workspace-write, or danger-full-access.
codex-reply - Continue a Codex session by providing the conversation id and prompt. The codex-reply tool takes the following properties:

Property	Type	Description
prompt (required)	string	The next user prompt to continue the Codex conversation.
conversationId (required)	string	The id of the conversation to continue.
Trying it Out
Tip

Codex often takes a few minutes to run. To accommodate this, adjust the MCP inspector's Request and Total timeouts to 600000ms (10 minutes) under â›­ Configuration.

Use the MCP inspector and codex mcp to build a simple tic-tac-toe game with the following settings:

approval-policy: never

prompt: Implement a simple tic-tac-toe game with HTML, Javascript, and CSS. Write the game in a single file called index.html.

sandbox: workspace-write

Click "Run Tool" and you should see a list of events emitted from the Codex MCP server as it builds the game.

LLM Mode Switching (auto)
- Use local commands in your workspace: `npx super-prompt grok-mode-on` or `npx super-prompt gpt-mode-on`.
- These commands persist the mode in `.super-prompt/mode.json` so both Codex and Cursor sessions see the same project mode.
- Alternatively, call MCP tools: `sp.grok_mode_on`, `sp.gpt_mode_on`, `sp.mode_get`, or `sp.mode_set`.
